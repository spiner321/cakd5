1p. 
안녕하세요 cakd5 데이터 어셈블팀, 
구매 감소고객 예측 모델을 통한 /마케팅 솔루션 제안 발표를 시작하겠습니다. 

2p 
목차는 다음과 같습니다. 
데이터 분석, 데이터 분석을 통해 도출된 과제 정의, 과제를 해결하기 위한 머신러닝 활용, 고객별 적합별 마케팅 제언 순서로 발표를 진행하겠습니다. 

3p 
1장에서는 외부요인 분석 및 활용 데이터에 대한 설명과 탐색적 데이터 분석을 한 부분에 대해서 말씀드리겠습니다.

4p 
저희는 데이터 분석을 시작하기에 앞서 유통업계의 현황을 살펴봄으로써 외부 요인에 대해서 파악하였습니다.
2013년부터 시작된 경기부진과 소비심리 위축으로 인해 2014년과 2015년 국내 소매유통업체의 성장이 크게 둔화되는 양상을 보이고 있습니다.
매출액의 양적 변화 이외에도 국내 소매유통 산업은/ 해외직접구매 증가, 모바일 쇼핑 채널의 확산, /옴니채널의 등장과 같은 중요한 변화가 나타나게 되었습니다. 

5p
특히 쇼핑 트렌드가 온,오프라인의 다양한 채널을 넘나들자/ 온라인과 오프라인 매장을 하나의 채널처럼 유기적으로 연계하여 / 고객 소비경험을 극대화할 수 있는 옴니채널의 중요성이 대두되었습니다. 

옴니채널은 '고객중심으로 모든 채널을 통합하고 연결하여 /일관된 커뮤니케이션 제공함으로써 /고객경험 강화 및 /판매를 증대시키는 채널 전략'입니다.

기존 유통채널 방식은 기업측면에서 채널 운영의 효율성을 위해 각 채널을 독립적으로 운영하는 멀티채널 방식인 반면 
옴니채널은 고객이 중심이 되어 고객경험 강화에 포커스를 두고 각 채널간에 유기적인 연결을 통한 시너지를 발생시키는 게 핵심입니다. 

6p 
따라서 저희는 고객이 하나의 유통사의 4개의 채널에서 구매한 이력과 /고객 성향을 파악할 수 있는 데이터를 활용해 
고객의 소비 패턴을 파악하고 패턴 분석을 통해 분류된 고객의 유형별로/ 니즈를 해결할 수 있는 고객중심 마케팅 방안을 제언하는 것을 목적으로 삼았습니다. 


7p 본격적으로 데이터 분석을 한 부분에 대해서 설명드리겠습니다.
저희는 우선적으로 2014년과 2015년의 매출액의 추이를 살펴보았습니다. 2014년 대비 2015년 매출액은 5.4%가 증가하였습니다. 
분기별로 살펴보았을 때도 2015년의 모든 분기의 매출액이 2014년보다 높은 것을 확인할 수 있었습니다. 

8p 2014년 대비 2015년의 총매출이 증가한 것을 확인한 뒤, 
속성별로 데이터를 시각화하여 매출에 영향을 주는 요인을 분석해보았습니다. 
성별, 제휴사 4곳, 거주지역, 연령대별로 나눠서 분석해보고 고객의 구매 패턴을 알기 위해서는 
좀 더 구체적으로 고객을 나누어 분석이 필요함을 파악하였습니다. 

9p 2장에서는 고객별로 데이터를 분석함으로써 도출된 과제와 과제를 해결하기 위한 사전준비 과정에 대해서 말씀드리겠습니다.

10p 고객별 분석을 위해서는 어떤 고객을 분석할지에 대한 기준이 필요합니다. 
따라서 저희는 유통업계에서 일반적으로 고객을 나눌 때 분기별로 파악하는 것을 고려하여 / 2014년, 2015년을 각각 4(사)분기씩 8(여덟)개의 분기로 나누었고, 
8(팔)분기 내내 구매가 지속되는 고객을 고정고객이라고 정의하였습니다. 그리고 8분기 동안 구매가 한 번이라도 끊기는 고객은 비고정 고객이라고 정의하였습니다. 

비고정고객과 고정고객을 나누어 이들의 1회 방문 평균 소비금액을 살펴보았을 때 비고정고객이 약 4000원 정도를 더 사용하는 것으로 파악이 되었으나
고정고객이 인구와 매출합계에서 차지하는 비율이 압도적으로 높았기 때문에 저희는 고정고객을 대상으로 분석하기로 결정하였습니다. 

11p
고정고객 중 구매가 감소한 고객을 살펴보기 위해서 감소고객과 증가고객을 정의하였습니다. 
감소고객은 마지막 분기인 8분기에서의 소비가 1분기에 비해 감소한 고객입니다.
이 때 고객의 소비가 계절의 특성에 따라 달라지는 것을 고려하여 구매액은 계절성을 제거하고 비교를 하였습니다.

전체 고정고객 18866(만팔천팔백육십육)명 중 감소고객은 10258(만이백오십팔)명으로 고정고객에서 절반이 넘는 비율인 54%(오십사퍼센트)를 차지하고 있었습니다. 

12p 
고정고객에서 발생한 매출액을 살펴보면 4.5% 상승으로 문제가 없는 듯 보이지만 
감소고객의 매출액을 확인했을 때, 1분기 대비 30%(삼십퍼센트)나 감소되어 157억원의 매출 손실이 발생한 것을 알 수 있습니다. 
만약 감소고객이 8분기에 적어도 1분기만큼의 구매를 유지했을 경우 
저희는 고정고객에게서 4.5% 매출 상승이 아닌 23.7%(이십삼쩜칠퍼센트) 매출 상승을 기대할 수 있습니다. 

13p 
따라서 구매감소고객을 예측하고 방지하는 것이 시급한 사항이라 판단되었고 
고객의 pain point에 사전대응할 수 있는 구매 감소고객 예측모델을 만드는 것을 과제로 설정하였습니다. 

14p . 
과제 해결 과정은 다음과 같습니다. 
(step1 :) 
데이터 분석을 통해 종속변수와 독립변수를 창출하고 완성된 데이터 셋으로 다양한 분류 알고리즘을 사용해 머신러닝을 진행하여 구매감소고객 예측을 위한 분류모델을 구현 합니다.  

(step2 :) 다음은 분류모델을 통해 구매감소로 예측된 고객을 KMeans 클러스터링 모델을 이용하여 군집화를 한뒤
(step3 :) 군집화된 집단에 따라 특성을 반영한 솔루션을 제공합니다.

(step4 :) 그리고 군집화된 집단 중 일부 고객 군집을 대상으로 잠재요인 협업 필터링을 이용하여 개인화 상품 추천을 진행함으로써 과제를 해결하도록 하겠습니다.  

15p. 
우선 예측 모델을 만들기 위한 분석에 앞서 제휴사별 상품 분류가 각각 다르기 때문에 통합된 분류 체계가 필요한 것을 확인하였습니다. 
국내 시장에서 유통되는 상품들의 정보를/ 표준화된 데이터베이스로 관리하는 '유통상품지식뱅크'를 참고해 14가지 카테고리로 통합된 분류체계를 마련하였으며, 소비자 구매행동 특성에 따라 편의품,선매품, 전문품으로 통합하였습니다.

16p. 
다음은 독립변수로 발굴하기 위해 카테고리화를 할 수 있는 변수들을 찾아 기준을 새로 정하여 재카테고리화 하였습니다. 
기존 10개의 그룹으로 묶였던 고객연령대는 구매패턴을 고려하여 학생층, 청년층, 중년층, 장년층, 노년층으로 다섯 개의 그룹으로 축소하였고,
지역은 우편번호로 나눠졌던 마흔 한개의 기준에서 17개의 지역별로 묶을 수 있었습니다. 
시간대는 상품 구매가 이루어지는 시간을 고려해 새벽, 오전, 오후, 저녁, 야간으로 구분하였습니다.

17p. 
모델을 학습시키기 위해서는 학습을 할 때 사용할 데이터와 테스트를 할 때 사용할 데이터를 분리해줘야 합니다. 
저희는 모델 학습에 사용했던 훈련(train)데이터를 잘 맞추는 모델이 아니라, 
학습에 사용하지 않은 테스트(test)데이터를 잘 맞추는 모델이 필요하기 때문입니다.

1분기 -7분기까지의 데이터를 사용하여 독립변수와 종속변수로 나누어 학습을 시키고
학습된 모델로 실제 테스트를 할 때는 1분기에서 7분기까지의 데이터를 독립변수로 하여 1분기 대비 8분기의 구매 감소여부를 예측하도록 하겠습니다.  
여기서 독립변수로 쓰이는 변수는 고객이 고유하게 가지고 있는 속성을 의미하는 변수인 고객 속성변수와 분기별 변화하는 구매패턴을 의미하는 구매 패턴 변수로 나누어서 선정하였습니다.


18p 
고객 속성 변수부터 설명드리겠습니다. 
성별, 연령대, 지역, 멤버십 가입유무, 경쟁사 이용횟수, 채널 이용횟수, 최근 방문일, 주말방문비중과 주말 구매액비중, 소비재별 구매비중으로 총 12개를 선정하였습니다.
지역에서 확인된 결측치는 고객이 가장 많이 이용한 점포코드를 참고하여 채워주었습니다. 

19p 
다음은 구매 패턴 변수입니다. 
구매 패턴 변수는 크게 구매지수와 방문지수로 나뉩니다. 구매지수는 고객의 분기별 변화하는 구매 액수를 지수화한 것이고 방문지수는 고객의 분기별 변화하는 방문 횟수를 지수화한 것입니다. 
분기, 14개의 카테고리, 그리고 4개의 제휴사를 합하여 각각 19개의 구매지수와 방문지수를 도출하여 총 38개의 변수를 선정하였습니다.

20p 
구매 패턴 변수를 지수화 하는 방법에 대해서 설명드리겠습니다.
고객은 각 분기별 구매액에 따라 1~10등급 중 하나의 등급을 부여받습니다. 
산출된 등급은 변동폭과 증감폭을 고려하여 하나의 지수로 만들 수 있습니다.
여기서 변동폭은 분기별 등급 변동의 절댓값의 합산으로 구하고, 증감폭은 마지막 분기와 첫 분기 등급의 차로 구할 수 있습니다.
변동폭보다 증감폭이 상대적으로 더 중요한 수치이기 때문에 이를 고려한 가중치를 곱하여 두 수를 더해줍니다.
방문지수도 구매 지수를 구한 방법과 같은 방법으로 지수화할 수 있습니다.  

21p 3장에서는 앞서 만든 변수를 이용한 머신러닝 활용부분에 대해서 발표하겠습니다. 

22p 
디시즌 트리, 랜덤 포레스트, 로지스틱 리그레션, xgboost, lightGBM 총 다섯개의 모델을 사용하였고
이진 분류 모델에서 중요한 평가 지표인 정확도와 ROC AUC SCORE를 고려했을 때 랜덤 포레스트, XG부스트 모델이 적합하다는 걸 알 수 있었습니다.


23p  
저희는 두 모델을 개선하기 위해 그리드 서치 시비를 통해 교차검증을 수행해보았고 최적의 하이퍼파라미터로 학습한 뒤 결과값을 참고하여 XG부스트 모델을 사용하기로 최종 결정하였습니다.


24p
감소라고 예측된 7997(칠천구백구십칠)명을 대상으로 XG부스트에서 중요하다고 나온 상위 15개 변수만 뽑아 KMEANS클러스터링 모델을 사용해 군집화를 수행하였고 
실루엣 계수와 분포도를 참고해 최종 군집 수는 3개로 결정하였습니다.


25p
4장에서는 앞서 군집화된 고객의 특징을 파악한 뒤 제안한 /마케팅 솔루션에 대해서 말씀드리겠습니다.

26p
구매 감소가 예측된 고객은 군집1에 1550(천오백오십)명, 군집2에 5353(오천삼백오십삼)명, 군집 3에 1094(천구십사)명입니다. 
군집 1은 가장 구매력이 높다고 판단된 군집 3보다는 /1회 평균 구매액이 낮지만, 고가 제품에서의 평균 소비금액이 높은 군집입니다. 
군집 2는 고객 수가 가장 많은 군집으로 /2번 군집의 매출액이 전체 감소 고객의 매출액에서 절반 가까이 차지하고 있지만/ 1회 평균 구매액이 가장 낮으므로 구매력이 낮다고 판단된 집단입니다. 
군집 3은 1분기 대비 8분기 매출액의 감소폭이 군집 1, 2에 비해 낮아 높은 ROI가 예상되어 이 군집을 대상으로는 개인화 상품 추천시스템을 진행하고자 하였습니다. 

27p 
앞서 말씀드린 군집에 대해서 마케팅 제언을 하겠습니다. 
마케팅 제언을 위해서 카테고리별로 가격대를 상, 중, 하로 세분류해주었습니다.
문제별 솔루션은 다음과 같습니다.
(기현)
우선 군집 1에 대해서 말씀드리겠습니다.
장년층 남성의 고가 명품에서의 구매 감소가 파악되어/ 이를 증가시키기 위해 경쟁사보다 더 높은 수준의 사은행사 기획과 제품 라인업 보완을 제시합니다.
그리고 중년층 남성의 중가 일상용품에서의 구매 감소를 막기 위해/ 중가 일상용품 브랜드의 팝업 스토어 입점을 기획합니다.

28p 
다음은 군집 2입니다.
장년층 남성의 고가 일상용품 중에서 특히 선물세트의 매출이 눈에 띄게 하락하였기 때문에 /고가의 선물세트 구성을 색다르게 하고, 명절 프로모션을 진행합니다.
그리고 중년층 남성의 고가 유아동 품목에서의 구매감소가 발생하였음으로/ 부모와 자녀가 함께 즐길 수 있는 다양한 프로그램을 마련함으로써 유아동품의 구매를 향상시킬 수 있는 솔루션을 제공합니다.

29p
3개의 군집 중 구매력이 높다고 판단된 고객을 대상으로 추천시스템을 이용해 개인화 상품 추천을 진행하였습니다. 
파이썬 기반 추천시스템을 위한 패키지인 /서프라이즈를 이용해 행렬분해 기반 잠재요인 협업 필터링을 수행합니다. 
고객번호를 입력받아 /1단계로 소비재 제품군을 추천하고 2단계로 카테고리를 추천한 뒤 3단계에서는 가격대에 따른 상품유형을 추천합니다. 

30p 
군집 3을 대상으로 개인화 상품 추천을 진행한 결과입니다. 
앞에서 설명해 드린 것처럼 고객별로 소비재의 추천이 먼저 진행되었고 카테고리, 분류등급, 제품 순으로 추천이 진행되었습니다. 
그 결과로는 고객마다 개인의 취향을 반영한 제품이 추천된 것을 확인할 수 있었습니다.

31p 
프로젝트에서 사용한 언어 및 활용 라이브러리 입니다. 
파이썬과 sql을 사용하여 주피터 노트북, 콜렙, 오라클 sql 디벨로퍼에서 분석을 수행하였고 
각 과정에서 넘파이, 판다스, 맷플롯립, 씨본, 싸이킷런, 서프라이즈 라이브러리를 사용하였습니다.

32p 
발표에 대한 질문받도록 하겠습니다.

33p
(질문 없으시만) 마지막으로 함께 프로젝트를 진행한 팀원들의 소감입니다. 
다들 경험이 부족했기 때문에 중간중간 시행착오가 많았지만 서로 격려하며 끝까지 이번 프로젝트를 함께 잘 마칠 수 있었습니다.

34p 
이상 데이터어셈블팀의 구매감소고객 예측모델을 통한 마케팅 솔루션 제안에 관한 발표를 마치도록 하겠습니다. 감사합니다. 






